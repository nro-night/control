<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Bảng điều khiển</title>
    <style>
        body{font-family:Arial,sans-serif;background-color:#f9f9f9;margin:0;padding:0}h1{color:#333;text-align:center}.container{width:80%;max-width:600px;margin:20px auto;padding:20px;background-color:#fff;box-shadow:0 0 10px rgb(0 0 0 / .1);border-radius:10px}.container label{font-weight:700;margin-right:10px;display:inline-block;width:120px}.container input,.container select{width:calc(100% - 20px);padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:5px;font-size:16px}.container button{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}.container button:hover{background-color:#0056b3}.inputContainer{margin-top:10px}.inputContainer input,.inputContainer select{margin-bottom:10px;width:calc(100% - 20px)}#responseArea{max-width:600px;margin:20px auto;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgb(0 0 0 / .1)}#responseArea pre{white-space:pre-wrap;word-wrap:break-word;background-color:#f0f0f0;padding:10px;border-radius:5px}
    </style>
</head>
<body>
    <h1>Server control</h1>
    <div class="container">
        <div id="login" style="display: block;">
            <label for="username">Username:</label>
            <input type="text" id="username" autocomplete="off" required><br>

            <label for="password">Password:</label>
            <input type="password" id="password" autocomplete="off" required><br>
            <button id="loginButton">Đăng nhập</button>
        </div>
        <div id="control" style="display: none;">
            <label for="action">Hành động:</label><br>
            <select id="action" onchange="changeAction()" required>
                <option value="getStatus">Lấy trạng thái</option>
                <option value="maintenace">Bảo trì</option>
                <option value="emergencyMaintenace">Bảo trì khẩn cấp</option>
                <option value="recharge">Nạp thẻ cho người chơi</option>
                <option value="setRoles">Ban người chơi</option>
                <option value="addGiftcode">Thêm Giftcode</option>
                <option value="deleteGiftcode">Xóa Giftcode</option>
                <option value="listGiftcode">Danh sách Giftcode</option>
                <option value="giftItems">Tặng items</option>
                <option value="findItems">Tìm kiếm items</option>
                <option value="findOptions">Tìm kiếm options</option>
                <option value="sendThongBao">Gửi thông báo</option>
                <option value="moreSetting">Cài đặt thêm</option>
            </select><br>

            <div class="inputContainer" id="inputContainer">

            </div>

            <button id="sendRequest">Submit</button>

            <div id="responseArea">
                <h2>Server response:</h2>
                <pre id="response"></pre>
            </div>
        </div>
    </div>
    <script>
        const simpleToast=function(){var e=document.createElement("style");e.innerHTML=`
            #toast-container {
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            }
            .toast {
            min-width: 250px;
            margin-bottom: 10px;
            background-color: #f2f2f7;
            color: #000;
            text-align: center;
            border-radius: 10px;
            padding: 16px;
            font-size: 17px;
            border: 1px solid #007aff;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            }
            `,document.head.appendChild(e);const a=document.createElement("div");return a.id="toast-container",document.body.appendChild(a),{show:function(e,t=2e3){const n=document.createElement("div");n.className="toast",n.innerHTML=e,a.appendChild(n),setTimeout(function(){n.style.visibility="visible",n.style.opacity="1"},100),setTimeout(function(){n.style.opacity="0",setTimeout(function(){a.removeChild(n)},500)},t+500)}}}();function changeAction(){var e=document.getElementById("action"),t=document.getElementById("inputContainer");switch(t.innerHTML="",e.value){case"maintenace":var a=document.createElement("input");a.setAttribute("placeholder","Bảo trì sau (giây)"),a.setAttribute("autocomplete","off"),a.setAttribute("id","secondsInput"),a.required=!0,t.appendChild(a);break;case"emergencyMaintenace":a=document.createElement("input");a.setAttribute("placeholder","Nguyên nhân"),a.setAttribute("autocomplete","off"),a.setAttribute("id","reasonInput"),a.required=!0,t.appendChild(a);break;case"addGiftcode":var a=document.createElement("input"),d=(a.setAttribute("placeholder","Code"),a.setAttribute("autocomplete","off"),a.setAttribute("id","codeInput"),a.required=!0,document.createElement("input")),o=(d.setAttribute("placeholder","Danh sách items (id1.qtyX_id2.qtyX_...)"),d.setAttribute("autocomplete","off"),d.setAttribute("id","itemsInput"),d.required=!0,document.createElement("input")),i=(o.setAttribute("placeholder","Danh sách options (id1.paramX_id2.paramX_...)"),o.setAttribute("autocomplete","off"),o.setAttribute("id","optionsInput"),o.required=!0,document.createElement("input")),l=(i.setAttribute("placeholder","Số lượt sử dụng"),i.setAttribute("autocomplete","off"),i.setAttribute("id","countInput"),i.required=!0,document.createElement("input")),u=(l.setAttribute("placeholder","Hạn sử dụng (Ngày)"),l.setAttribute("autocomplete","off"),l.setAttribute("id","expireInput"),l.required=!0,document.createElement("label")),r=(u.setAttribute("for","saveOnDb"),u.innerText="Lưu trên DB",document.createElement("input"));r.setAttribute("type","checkbox"),r.setAttribute("id","saveOnDb"),t.appendChild(a),t.appendChild(document.createElement("br")),t.appendChild(d),t.appendChild(document.createElement("br")),t.appendChild(o),t.appendChild(document.createElement("br")),t.appendChild(i),t.appendChild(document.createElement("br")),t.appendChild(l),t.appendChild(document.createElement("br")),t.appendChild(u),t.appendChild(r);break;case"deleteGiftcode":a=document.createElement("input"),d=(a.setAttribute("placeholder","Code"),a.setAttribute("autocomplete","off"),a.setAttribute("id","codeInput"),a.required=!0,document.createElement("label")),o=(d.setAttribute("for","saveOnDb"),d.innerText="Xóa trên DB",document.createElement("input"));o.setAttribute("type","checkbox"),o.setAttribute("id","saveOnDb"),t.appendChild(a),t.appendChild(document.createElement("br")),t.appendChild(d),t.appendChild(o);break;case"sendThongBao":{i=document.createElement("label"),l=(i.setAttribute("for","textInput"),i.innerText="Nội dung thông báo",document.createElement("textarea")),u=(l.setAttribute("id","textInput"),document.createElement("label"));u.setAttribute("for","type"),u.innerText="Kiểu thông báo";let n=document.createElement("select");[{value:"all",text:"Thông báo tất cả"},{value:"bottom",text:"Thông báo bên dưới"},{value:"simpleToast.show",text:"Thông báo OK tất cả"}].forEach(e=>{var t=document.createElement("option");t.value=e.value,t.text=e.text,n.appendChild(t)}),n.setAttribute("id","type"),t.appendChild(i),t.appendChild(document.createElement("br")),t.appendChild(l),t.appendChild(document.createElement("br")),t.appendChild(u),t.appendChild(document.createElement("br")),t.appendChild(n);break}case"giftItems":r=document.createElement("input"),a=(r.setAttribute("placeholder","Tên người chơi"),r.setAttribute("autocomplete","off"),r.setAttribute("id","nameInput"),r.required=!0,document.createElement("input")),d=(a.setAttribute("placeholder","Danh sách items (id1.qtyX_id2.qtyX_...)"),a.setAttribute("id","itemsInput"),a.required=!0,document.createElement("input"));d.setAttribute("placeholder","Danh sách options (id1.paramX_id2.paramX_...)"),d.setAttribute("id","optionsInput"),d.required=!0,t.appendChild(r),t.appendChild(document.createElement("br")),t.appendChild(a),t.appendChild(document.createElement("br")),t.appendChild(d),t.appendChild(document.createElement("br"));break;case"recharge":o=document.createElement("input"),i=(o.setAttribute("placeholder","Tên nhân vật"),o.setAttribute("autocomplete","off"),o.setAttribute("id","nameInput"),o.required=!0,document.createElement("input"));i.setAttribute("placeholder","Số tiền"),i.setAttribute("id","amountInput"),i.required=!0,t.appendChild(o),t.appendChild(document.createElement("br")),t.appendChild(i);break;case"setRoles":{l=document.createElement("input"),u=(l.setAttribute("placeholder","Tên nhân vật"),l.setAttribute("autocomplete","off"),l.setAttribute("id","nameInput"),l.required=!0,document.createElement("label"));u.setAttribute("for","roleInput"),u.innerText="Trạng thái";let n=document.createElement("select");[{value:"0",text:"Bình thường"},{value:"1",text:"Ban acc"},{value:"2",text:"Ban chat"},{value:"3",text:"Ban chat thế giới"},{value:"4",text:"Ban tất cả chat"},{value:"100",text:"Vai trò Admin"}].forEach(e=>{var t=document.createElement("option");t.value=e.value,t.text=e.text,n.appendChild(t)}),n.setAttribute("id","roleInput");r=document.createElement("input");r.setAttribute("placeholder","Lý do"),r.setAttribute("autocomplete","off"),r.setAttribute("id","reasonInput"),r.required=!0,t.appendChild(l),t.appendChild(document.createElement("br")),t.appendChild(u),t.appendChild(document.createElement("br")),t.appendChild(n),t.appendChild(document.createElement("br")),t.appendChild(r);break}case"findItems":{a=document.createElement("input"),d=(a.setAttribute("placeholder","Item muốn tìm"),a.setAttribute("autocomplete","off"),a.setAttribute("id","itemsInput"),a.required=!0,document.createElement("label"));d.setAttribute("for","type"),d.innerText="Kiểu tìm kiếm";let n=document.createElement("select");[{value:"1",text:"Tìm bằng ID (số)"},{value:"2",text:"Tìm theo Tên (chữ/số/ký tự)"},{value:"3",text:"Tìm bằng Level (số)"},{value:"4",text:"Tìm bằng Type (số)"}].forEach(e=>{var t=document.createElement("option");t.value=e.value,t.text=e.text,n.appendChild(t)}),n.setAttribute("id","type"),t.appendChild(a),t.appendChild(document.createElement("br")),t.appendChild(d),t.appendChild(document.createElement("br")),t.appendChild(n);break}case"findOptions":{o=document.createElement("input"),i=(o.setAttribute("placeholder","Option muốn tìm"),o.setAttribute("autocomplete","off"),o.setAttribute("id","optionsInput"),o.required=!0,document.createElement("label"));i.setAttribute("for","type"),i.innerText="Kiểu tìm kiếm";let n=document.createElement("select");[{value:"1",text:"Tìm bằng ID (số)"},{value:"2",text:"Tìm theo Tên (chữ/số/ký tự)"}].forEach(e=>{var t=document.createElement("option");t.value=e.value,t.text=e.text,n.appendChild(t)}),n.setAttribute("id","type"),t.appendChild(o),t.appendChild(document.createElement("br")),t.appendChild(i),t.appendChild(document.createElement("br")),t.appendChild(n);break}case"moreSetting":l=document.createElement("input"),u=(l.setAttribute("placeholder","Delay login (giây)"),l.setAttribute("autocomplete","off"),l.setAttribute("id","delayLogin"),l.required=!0,document.createElement("input")),r=(u.setAttribute("placeholder","delay Update database (giây)"),u.setAttribute("autocomplete","off"),u.setAttribute("id","delayUpdateDb"),u.required=!0,document.createElement("input")),a=(r.setAttribute("placeholder","TNSM server (số)"),r.setAttribute("autocomplete","off"),r.setAttribute("id","donateExp"),r.required=!0,document.createElement("input")),d=(a.setAttribute("placeholder","Gold Sell rate (số thực)"),a.setAttribute("autocomplete","off"),a.setAttribute("id","goldSell"),a.required=!0,document.createElement("input")),o=(d.setAttribute("placeholder","Top up bonus rate (số thực)"),d.setAttribute("autocomplete","off"),d.setAttribute("id","topupBonus"),d.required=!0,document.createElement("input")),i=(o.setAttribute("placeholder","Tich luy bonus rate (số thực)"),o.setAttribute("autocomplete","off"),o.setAttribute("id","tichluyBonus"),o.required=!0,document.createElement("input"));i.setAttribute("placeholder","Gold mở thành viên (số)"),i.setAttribute("autocomplete","off"),i.setAttribute("id","goldMoThanhVien"),i.required=!0,t.appendChild(l),t.appendChild(document.createElement("br")),t.appendChild(u),t.appendChild(document.createElement("br")),t.appendChild(r),t.appendChild(document.createElement("br")),t.appendChild(a),t.appendChild(document.createElement("br")),t.appendChild(d),t.appendChild(document.createElement("br")),t.appendChild(o),t.appendChild(document.createElement("br")),t.appendChild(i)}}document.addEventListener("DOMContentLoaded",e=>{var t=localStorage.getItem("Authorization");if(!t||t.length<10)document.getElementById("control").style.display="none",document.getElementById("login").style.display="block";else try{var n=atob(t).split(":"),a=parseInt(n[0],10);isNaN(a)||a<Date.now()?(simpleToast.show("Phiên đăng nhập đã hết hạn"),localStorage.removeItem("Authorization"),document.getElementById("control").style.display="none",document.getElementById("login").style.display="block"):(document.getElementById("control").style.display="block",document.getElementById("login").style.display="none")}catch(e){simpleToast.show("Phiên đăng nhập không hợp lệ hoặc lỗi giải mã"),document.getElementById("control").style.display="none",document.getElementById("login").style.display="block"}}),document.getElementById("loginButton").addEventListener("click",e=>{var t=document.getElementById("username").value,n=document.getElementById("password").value;t.trim().length<=0?simpleToast.show("username trống"):n.trim().length<=0?simpleToast.show("password trống"):(t={action:"Login",Basic:btoa(t+":"+n)},fetch("http://13.228.56.4:8080/post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Login"},body:JSON.stringify(t)}).then(e=>e.ok?e.text():401==e.status?void simpleToast.show("Đăng nhập thất bại, sai tên tài khoản hoặc mật khẩu"):429==e.status?void simpleToast.show("Quá nhiều yêu cầu, hãy thử lại sau"):void simpleToast.show("Có lỗi xảy ra: "+e.status)).then(e=>{e&&(localStorage.setItem("Authorization",e),document.getElementById("control").style.display="block",document.getElementById("login").style.display="none",simpleToast.show("Đăng nhập thành công!"))}).catch(e=>{document.getElementById("response").innerText="Có lỗi xảy ra: "+e.message}))}),document.getElementById("sendRequest").addEventListener("click",function(e){var t=localStorage.getItem("Authorization"),n=document.getElementById("action").value,a={};switch(n){case"listGiftcode":case"getStatus":a={action:n};break;case"maintenace":a={action:n,secondsInput:document.getElementById("secondsInput").value};break;case"emergencyMaintenace":a={action:n,reasonInput:document.getElementById("reasonInput").value};break;case"addGiftcode":a={action:n,codeInput:document.getElementById("codeInput").value,itemsInput:document.getElementById("itemsInput").value,optionsInput:document.getElementById("optionsInput").value,countInput:document.getElementById("countInput").value,expireInput:document.getElementById("expireInput").value,saveOnDb:document.getElementById("saveOnDb").checked};break;case"deleteGiftcode":a={action:n,codeInput:document.getElementById("codeInput").value,type:document.getElementById("saveOnDb").checked?"1":"0"};break;case"recharge":a={action:n,nameInput:document.getElementById("nameInput").value,amountInput:document.getElementById("amountInput").value};break;case"setRoles":a={action:n,nameInput:document.getElementById("nameInput").value,roleInput:document.getElementById("roleInput").value,reasonInput:document.getElementById("reasonInput").value};break;case"giftItems":a={action:n,nameInput:document.getElementById("nameInput").value,itemsInput:document.getElementById("itemsInput").value,optionsInput:document.getElementById("optionsInput").value};break;case"findItems":a={action:n,itemsInput:document.getElementById("itemsInput").value,type:document.getElementById("type").value};break;case"findOptions":a={action:n,optionsInput:document.getElementById("optionsInput").value,type:document.getElementById("type").value};break;case"sendThongBao":a={action:n,textInput:document.getElementById("textInput").value,type:document.getElementById("type").value};break;case"moreSetting":var a={action:n},d=document.getElementById("delayLogin").value,d=(d&&(a.delayLogin=d),document.getElementById("delayUpdateDb").value),d=(d&&(a.delayUpdateDb=d),document.getElementById("donateExp").value),d=(d&&(a.donateExp=d),document.getElementById("goldSell").value),d=(d&&(a.goldSell=d),document.getElementById("topupBonus").value),d=(d&&(a.topupBonus=d),document.getElementById("tichluyBonus").value),d=(d&&(a.tichluyBonus=d),document.getElementById("goldMoThanhVien").value);d&&(a.goldMoThanhVien=d)}fetch("http://13.228.56.4:8080/post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(a)}).then(e=>{if(!e.ok){if(429==e.status)return"Quá nhiều yêu cầu, xin hãy chờ vài giây";if(401==e.status)return localStorage.removeItem("Authorization"),document.getElementById("control").style.display="none",document.getElementById("login").style.display="block",void simpleToast.show("Xác minh thất bại\nHoặc đăng nhập đã hết hạn")}return e.text()}).then(e=>{document.getElementById("response").innerText=e}).catch(e=>{document.getElementById("response").innerText="Có lỗi xảy ra: "+e.message})});
    </script>
</body>
</html>